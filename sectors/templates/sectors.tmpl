//@version=5
// @description Lightweight library for mapping ETFs to their Top 10 holdings. (Generated)
library("SectorLib", overlay=false)

// ──────────────
// 1. Sector Membership Helpers (Internal)
// ──────────────
{{- range $sector, $stocks := .Sectors }}
f_is{{ $sector }}(string stock) =>
    switch stock
        {{- range $s := $stocks }}
        "{{ $s }}" => true
        {{- end }}
        => false
{{ end }}

// ──────────────
// 2. Exported Functions
// ──────────────

// @function Returns the sector ticker (e.g., "XLK") for a given stock ticker.
export f_getSector(string stock) =>
    switch
        {{- range $sector, $stocks := .Sectors }}
        f_is{{ $sector }}(stock) => "{{ $sector }}"
        {{- end }}
        => "unknown"

// @function Returns the total number of holdings tracked for a specific sector.
export f_getNumHoldings(string sector) =>
    switch sector
        {{- range $sector, $stocks := .Sectors }}
        "{{ $sector }}" => {{ len $stocks }}
        {{- end }}
        => 0

// @function Returns a specific holding by index for a sector.
export f_getHolding(string sector, int idx) =>
    string ticker = na
    switch sector
        {{- range $sector, $stocks := .Sectors }}
        "{{ $sector }}" =>
            switch idx
                {{- range $i, $s := $stocks }}
                {{ $i }} => "{{ $s }}"
                {{- end }}
        {{- end }}
    ticker

// @function Returns an array of all sector tickers included in this library.
export f_getAllSectors() =>
    array.from({{- $first := true }}{{- range $sector, $_ := .Sectors }}{{- if $first }}{{ $first = false }}"{{ $sector }}"{{ else }}, "{{ $sector }}"{{ end }}{{- end }})